# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒŒ Anuset-FINAL :: Makefile Principal
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Uso:     make <comando>
# Requiere: bash, docker, python3

SHELL := /bin/bash
.DEFAULT_GOAL := help

# Variables globales
DATE := $(shell date +%Y%m%d_%H%M%S)
ZIP_NAME := Anuset-FINAL_backup_$(DATE).zip

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ INICIO Y GESTIÃ“N DE SERVICIOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

up: check-env fix-all clean-requirements check-models  ## ğŸ”„ Levanta todos los servicios
	docker compose up -d --build
	$(call mostrar_servicios_emoji)

up-anuset: check-env fix-all clean-requirements check-models  ## ğŸš€ Solo frontend+backend
	docker compose up -d --build frontend backend
	@echo "âœ… Splash: http://localhost:3000"
	@if docker ps --format '{{.Names}}' | grep -qi 'webui'; then \
		echo 'ğŸ§’ WebUI: http://localhost:8080'; \
	else \
		echo 'âš ï¸  WebUI no activo. Usa: make up-webui'; \
	fi
	@echo "âœ¨ Ritual invocado con Ã©xito. Que Anu te guÃ­e ğŸ¾ğŸŒ "

down:  ## ğŸ’• Detiene todos los servicios
	docker compose down

restart:  ## ğŸ” Reinicia todos los servicios
	$(MAKE) down
	$(MAKE) up

restart-service:  ## ğŸ” Reinicia un servicio: SERVICE=nombre
ifndef SERVICE
	$(error âŒ Debe definir SERVICE=nombre del servicio)
endif
	docker restart $(SERVICE)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ” PERMISOS Y CONFIGURACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

check-env:  ## âš™ï¸ Verifica Docker y Python
	@command -v docker >/dev/null || { echo 'âŒ Falta Docker'; exit 1; }
	@command -v python3 >/dev/null || { echo 'âŒ Falta Python3'; exit 1; }
	@echo "âœ… Entorno verificado"

fix-all: fix-permissions fix-permisos-models  ## ğŸ”§ Arregla permisos globales

fix-permissions:  ## ğŸ” Scripts ejecutables
	chmod +x scripts/*.sh || true
	find services/ -type f -name '*.sh' -exec chmod +x {} +

fix-permisos-models:  ## ğŸ” Modelos IA
	@if [ -f scripts/fix-permisos-models.sh ]; then \
		bash scripts/fix-permisos-models.sh; \
	else \
		echo "ğŸŸ¡ Script faltante: fix-permisos-models.sh"; \
	fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§  DIAGNÃ“STICOS Y VERIFICACIONES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

diag: backup  ## ğŸ§  DiagnÃ³stico completo
	bash scripts/diag_anu89.sh

health:  ## ğŸ“Š Estado bÃ¡sico de servicios
	bash scripts/diag_anu89.sh --check

check-models:  ## ğŸ“¦ Modelos IA detectados
	bash scripts/diag_anu89.sh --models

check-ci:  ## ğŸ” Verifica estructura bÃ¡sica
	@echo "ğŸ” Verificando estructura..."
	@test -d backend && echo "âœ… backend/ OK" || (echo "âŒ Falta backend/" && exit 1)
	@test -f backend/app.py && echo "âœ… app.py OK" || (echo "âŒ Falta app.py" && exit 1)
	@test -d frontend && echo "âœ… frontend/ OK" || (echo "âŒ Falta frontend/" && exit 1)
	@test -f frontend/vite.config.ts && echo "âœ… vite.config.ts OK" || (echo "âŒ Falta vite.config.ts" && exit 1)
	@python3 -m py_compile backend/app.py || (echo "âŒ Error en backend/app.py" && exit 1)

diag-req: backup  ## ğŸ“‹ Verifica requirements.txt
	python3 scripts/diag_requirements.py

diag-req-full: backup  ## ğŸ“‹ VerificaciÃ³n profunda de requisitos
	python3 scripts/diag_requirements_full.py

check-dockerfiles: backup  ## ğŸ³ Dockerfiles vÃ¡lidos
	python3 scripts/check_dockerfile.py

test-all: backup  ## ğŸ§ª Pruebas en todos los servicios IA
	bash scripts/test_all_services.sh

verificar-ritual: backup  ## ğŸ”® Verifica rituales activos
	bash scripts/verificar_ritual.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒ  RITUALES Y RESET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ritual:  ## ğŸŒ  Ritual completo mÃ­stico
	@clear
	@cat scripts/banner_anuu.txt
	$(MAKE) fix-all
	$(MAKE) check-models
	$(MAKE) clean-requirements
	$(MAKE) diag
	$(MAKE) snapshot
	@echo "ğŸŒŒ Ritual completado. Que Anu te acompaÃ±e ğŸ¾"

reset-hard: clean-containers fix-all up test-all  ## â™»ï¸ Reinicio total y limpio

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§¼ MANTENIMIENTO Y LIMPIEZA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

clean-requirements:  ## ğŸ§¹ Limpia duplicados
	python3 scripts/clean_requirements.py

clean-empty-flags:  ## ğŸ§¹ Elimina flags vacÃ­os
	bash scripts/clean_empty_flags.sh

clean-containers:  ## âš ï¸ Elimina todos los contenedores
	-docker rm -f $$(docker ps -aq) || true

fix-symlinks:  ## ğŸ”— Repara enlaces simbÃ³licos
	bash scripts/fix_symlinks.sh

purga:  ## ğŸ§¼ Mueve archivos pesados a backup
	bash scripts/purga.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“¦ BACKUPS Y SNAPSHOTS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

backup:  ## ğŸ”’ Backup general
	bash scripts/auto_backup.sh

zip:  ## ğŸ“¦ Genera ZIP limpio
	zip -r $(ZIP_NAME) . \
		-x "*.git/*" "backups/*" "Respaldo/*" \
		"*.safetensors" "*.ckpt" "*.pth" "*.bin" "*.onnx" \
		"frontend/node_modules/*" "backend/__pycache__/*" "tests/*" "notebooks/*"
	@echo "âœ… ZIP creado: $(ZIP_NAME)"

snapshot: backup  ## ğŸ“¸ Snapshot de estructura
	bash scripts/snapshot_estructura.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§± GENERACIÃ“N DE SERVICIOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

generate-app: backup  ## ğŸ§  Genera app.py IA
	python3 scripts/generate_app_py.py

generate-service-ia: backup  ## ğŸ§  Servicio IA estÃ¡ndar
	python3 scripts/generate_service_ia.py

prepare-structure: backup  ## ğŸ§± Estructura modular
	bash scripts/prepare_structure.sh

prepare-unificado: backup  ## ğŸ§± Estructura UNIFICADA
	bash scripts/prepare_structure_UNIFICADO.sh

reorganizar: backup  ## ğŸ“‚ Reorganiza carpetas IA
	bash scripts/reorganizar_estructura.sh

revertir: backup  ## â†©ï¸ ReversiÃ³n de estructura
	bash scripts/revertir_reorganizacion.sh

enlazar-modelos: backup  ## ğŸ”— Enlaza modelos IA
	bash scripts/enlazar_modelos.sh

force-link-models:  ## ğŸ”— Fuerza re-enlace
	bash scripts/enlazar_modelos.sh --force

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“œ LOGS Y ESTADO DEL SISTEMA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

logs:  ## ğŸ“œ Logs de todos los contenedores
	@for container in $(shell docker ps --format '{{.Names}}'); do \
		echo -e "\n=== $$container ==="; \
		docker logs --tail=10 $$container 2>/dev/null || echo "âŒ No se encontrÃ³ el contenedor"; \
	done

logs-service:  ## ğŸ“œ Logs de un servicio: SERVICE=nombre
ifndef SERVICE
	$(error âŒ Debe definir SERVICE=nombre)
endif
	docker logs --tail=20 $(SERVICE)

status-check:  ## ğŸ“ˆ Estado actual
	docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

puertos:  ## ğŸ”Œ Puertos en uso
	docker ps --format "table {{.Names}}\t{{.Ports}}"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ PRODUCCIÃ“N Y DESPLIEGUE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

deploy:  ## ğŸš€ Despliegue en producciÃ³n
	docker compose -f docker-compose.prod.yml up -d --build

teardown:  ## ğŸ’¥ Detiene producciÃ³n
	docker compose -f docker-compose.prod.yml down

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“– AYUDA Y DOCUMENTACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

help:  ## ğŸ“– Ayuda bÃ¡sica de comandos
	@echo -e "\nğŸŒŒ \033[1;36mAnuset-FINAL :: Comandos disponibles\033[0m"
	@echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
	@awk 'BEGIN {FS = ":.*?## "}; /^[a-zA-Z0-9\-_]+:.*?## / {printf "âœ¨ \033[1;33m%-25s\033[0m %s\n", $$1, $$2}' $(MAKEFILE_LIST) | sort
	@echo -e "\nğŸ¾ Usa \033[1;32mmake <comando>\033[0m para ejecutar. Que Anu te ilumine âœ¨"

help-advanced:  ## ğŸ§™ Ayuda extendida con rutas
	@echo -e "\nğŸŒŒ \033[1;36mAnuset-FINAL :: Ayuda extendida\033[0m"
	@echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
	@echo "ğŸ“ Carpeta del proyecto: $(CURDIR)"
	@echo "ğŸ“¦ ZIP por defecto: $(ZIP_NAME)"
	@echo "ğŸ“œ Requisitos: Docker, Bash, Python3"
	@echo "ğŸ“‘ Rutas clave:"
	@echo " - scripts/: Scripts utilitarios (bash/py)"
	@echo " - services/: Servicios IA simbÃ³licos"
	@echo " - backend/: API FastAPI"
	@echo " - frontend/: Interfaz Vite + React"
	@echo " - backups/: Snapshots y archivos guardados"
	@echo ""
	@echo "ğŸ”§ Variables Ãºtiles:"
	@echo " - SERVICE=nombre     (logs, restart, etc.)"
	@echo " - ZIP_NAME=archivo.zip"
	@echo ""
	@echo "ğŸŒ  Comandos mÃ­sticos: make ritual, make snapshot, make purga"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒŒ Anuset-FINAL :: Makefile Principal
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Uso:     make <comando>
# Requiere: bash, docker, python3

SHELL := /bin/bash
.DEFAULT_GOAL := help

# Variables globales
DATE := $(shell date +%Y%m%d_%H%M%S)
ZIP_NAME := Anuset-FINAL_backup_$(DATE).zip

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ INICIO Y GESTIÃ“N DE SERVICIOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

up: check-env fix-all clean-requirements check-models  ## ğŸ”„ Levanta todos los servicios
	docker compose up -d --build
	$(call mostrar_servicios_emoji)

up-anuset: check-env fix-all clean-requirements check-models  ## ğŸš€ Solo frontend+backend
	docker compose up -d --build frontend backend
	@echo "âœ… Splash: http://localhost:3000"
	@if docker ps --format '{{.Names}}' | grep -qi 'webui'; then \
		echo 'ğŸ§’ WebUI: http://localhost:8080'; \
	else \
		echo 'âš ï¸  WebUI no activo. Usa: make up-webui'; \
	fi
	@echo "âœ¨ Ritual invocado con Ã©xito. Que Anu te guÃ­e ğŸ¾ğŸŒ "

down:  ## ğŸ’• Detiene todos los servicios
	docker compose down

restart:  ## ğŸ” Reinicia todos los servicios
	$(MAKE) down
	$(MAKE) up

restart-service:  ## ğŸ” Reinicia un servicio: SERVICE=nombre
ifndef SERVICE
	$(error âŒ Debe definir SERVICE=nombre del servicio)
endif
	docker restart $(SERVICE)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ” PERMISOS Y CONFIGURACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

check-env:  ## âš™ï¸ Verifica Docker y Python
	@command -v docker >/dev/null || { echo 'âŒ Falta Docker'; exit 1; }
	@command -v python3 >/dev/null || { echo 'âŒ Falta Python3'; exit 1; }
	@echo "âœ… Entorno verificado"

fix-all: fix-permissions fix-permisos-models  ## ğŸ”§ Arregla permisos globales

fix-permissions:  ## ğŸ” Scripts ejecutables
	chmod +x scripts/*.sh || true
	find services/ -type f -name '*.sh' -exec chmod +x {} +

fix-permisos-models:  ## ğŸ” Modelos IA
	@if [ -f scripts/fix-permisos-models.sh ]; then \
		bash scripts/fix-permisos-models.sh; \
	else \
		echo "ğŸŸ¡ Script faltante: fix-permisos-models.sh"; \
	fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§  DIAGNÃ“STICOS Y VERIFICACIONES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

diag: backup  ## ğŸ§  DiagnÃ³stico completo
	bash scripts/diag_anu89.sh

health:  ## ğŸ“Š Estado bÃ¡sico de servicios
	bash scripts/diag_anu89.sh --check

check-models:  ## ğŸ“¦ Modelos IA detectados
	bash scripts/diag_anu89.sh --models

check-ci:  ## ğŸ” Verifica estructura bÃ¡sica
	@echo "ğŸ” Verificando estructura..."
	@test -d backend && echo "âœ… backend/ OK" || (echo "âŒ Falta backend/" && exit 1)
	@test -f backend/app.py && echo "âœ… app.py OK" || (echo "âŒ Falta app.py" && exit 1)
	@test -d frontend && echo "âœ… frontend/ OK" || (echo "âŒ Falta frontend/" && exit 1)
	@test -f frontend/vite.config.ts && echo "âœ… vite.config.ts OK" || (echo "âŒ Falta vite.config.ts" && exit 1)
	@python3 -m py_compile backend/app.py || (echo "âŒ Error en backend/app.py" && exit 1)

diag-req: backup  ## ğŸ“‹ Verifica requirements.txt
	python3 scripts/diag_requirements.py

diag-req-full: backup  ## ğŸ“‹ VerificaciÃ³n profunda de requisitos
	python3 scripts/diag_requirements_full.py

check-dockerfiles: backup  ## ğŸ³ Dockerfiles vÃ¡lidos
	python3 scripts/check_dockerfile.py

test-all: backup  ## ğŸ§ª Pruebas en todos los servicios IA
	bash scripts/test_all_services.sh

verificar-ritual: backup  ## ğŸ”® Verifica rituales activos
	bash scripts/verificar_ritual.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒ  RITUALES Y RESET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ritual:  ## ğŸŒ  Ritual completo mÃ­stico
	@clear
	@cat scripts/banner_anuu.txt
	$(MAKE) fix-all
	$(MAKE) check-models
	$(MAKE) clean-requirements
	$(MAKE) diag
	$(MAKE) snapshot
	@echo "ğŸŒŒ Ritual completado. Que Anu te acompaÃ±e ğŸ¾"

reset-hard: clean-containers fix-all up test-all  ## â™»ï¸ Reinicio total y limpio

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§¼ MANTENIMIENTO Y LIMPIEZA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

clean-requirements:  ## ğŸ§¹ Limpia duplicados
	python3 scripts/clean_requirements.py

clean-empty-flags:  ## ğŸ§¹ Elimina flags vacÃ­os
	bash scripts/clean_empty_flags.sh

clean-containers:  ## âš ï¸ Elimina todos los contenedores
	-docker rm -f $$(docker ps -aq) || true

fix-symlinks:  ## ğŸ”— Repara enlaces simbÃ³licos
	bash scripts/fix_symlinks.sh

purga:  ## ğŸ§¼ Mueve archivos pesados a backup
	bash scripts/purga.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“¦ BACKUPS Y SNAPSHOTS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

backup:  ## ğŸ”’ Backup general
	bash scripts/auto_backup.sh

zip:  ## ğŸ“¦ Genera ZIP limpio
	zip -r $(ZIP_NAME) . \
		-x "*.git/*" "backups/*" "Respaldo/*" \
		"*.safetensors" "*.ckpt" "*.pth" "*.bin" "*.onnx" \
		"frontend/node_modules/*" "backend/__pycache__/*" "tests/*" "notebooks/*"
	@echo "âœ… ZIP creado: $(ZIP_NAME)"

snapshot: backup  ## ğŸ“¸ Snapshot de estructura
	bash scripts/snapshot_estructura.sh

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§± GENERACIÃ“N DE SERVICIOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

generate-app: backup  ## ğŸ§  Genera app.py IA
	python3 scripts/generate_app_py.py

generate-service-ia: backup  ## ğŸ§  Servicio IA estÃ¡ndar
	python3 scripts/generate_service_ia.py

prepare-structure: backup  ## ğŸ§± Estructura modular
	bash scripts/prepare_structure.sh

prepare-unificado: backup  ## ğŸ§± Estructura UNIFICADA
	bash scripts/prepare_structure_UNIFICADO.sh

reorganizar: backup  ## ğŸ“‚ Reorganiza carpetas IA
	bash scripts/reorganizar_estructura.sh

revertir: backup  ## â†©ï¸ ReversiÃ³n de estructura
	bash scripts/revertir_reorganizacion.sh

enlazar-modelos: backup  ## ğŸ”— Enlaza modelos IA
	bash scripts/enlazar_modelos.sh

force-link-models:  ## ğŸ”— Fuerza re-enlace
	bash scripts/enlazar_modelos.sh --force

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“œ LOGS Y ESTADO DEL SISTEMA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

logs:  ## ğŸ“œ Logs de todos los contenedores
	@for container in $(shell docker ps --format '{{.Names}}'); do \
		echo -e "\n=== $$container ==="; \
		docker logs --tail=10 $$container 2>/dev/null || echo "âŒ No se encontrÃ³ el contenedor"; \
	done

logs-service:  ## ğŸ“œ Logs de un servicio: SERVICE=nombre
ifndef SERVICE
	$(error âŒ Debe definir SERVICE=nombre)
endif
	docker logs --tail=20 $(SERVICE)

status-check:  ## ğŸ“ˆ Estado actual
	docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

puertos:  ## ğŸ”Œ Puertos en uso
	docker ps --format "table {{.Names}}\t{{.Ports}}"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ PRODUCCIÃ“N Y DESPLIEGUE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

deploy:  ## ğŸš€ Despliegue en producciÃ³n
	docker compose -f docker-compose.prod.yml up -d --build

teardown:  ## ğŸ’¥ Detiene producciÃ³n
	docker compose -f docker-compose.prod.yml down

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“– AYUDA Y DOCUMENTACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

help:  ## ğŸ“– Ayuda bÃ¡sica de comandos
	@echo -e "\nğŸŒŒ \033[1;36mAnuset-FINAL :: Comandos disponibles\033[0m"
	@echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
	@awk 'BEGIN {FS = ":.*?## "}; /^[a-zA-Z0-9\-_]+:.*?## / {printf "âœ¨ \033[1;33m%-25s\033[0m %s\n", $$1, $$2}' $(MAKEFILE_LIST) | sort
	@echo -e "\nğŸ¾ Usa \033[1;32mmake <comando>\033[0m para ejecutar. Que Anu te ilumine âœ¨"

help-advanced:  ## ğŸ§™ Ayuda extendida con rutas
	@echo -e "\nğŸŒŒ \033[1;36mAnuset-FINAL :: Ayuda extendida\033[0m"
	@echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
	@echo "ğŸ“ Carpeta del proyecto: $(CURDIR)"
	@echo "ğŸ“¦ ZIP por defecto: $(ZIP_NAME)"
	@echo "ğŸ“œ Requisitos: Docker, Bash, Python3"
	@echo "ğŸ“‘ Rutas clave:"
	@echo " - scripts/: Scripts utilitarios (bash/py)"
	@echo " - services/: Servicios IA simbÃ³licos"
	@echo " - backend/: API FastAPI"
	@echo " - frontend/: Interfaz Vite + React"
	@echo " - backups/: Snapshots y archivos guardados"
	@echo ""
	@echo "ğŸ”§ Variables Ãºtiles:"
	@echo " - SERVICE=nombre     (logs, restart, etc.)"
	@echo " - ZIP_NAME=archivo.zip"
	@echo ""